<div id="container">
  <mat-stepper #stepper>
    <mat-step [stepControl]="firstFormGroup" label="Contract Information">

      <form [formGroup]="firstFormGroup">
        <mat-form-field appearance="outline">
          <mat-label>Contract title</mat-label>
          <input matInput placeholder="Insert title..." formControlName="contractTitle" required>
        </mat-form-field>

        <app-userlist [isSelectable]="true" (selectedUsersEmitter)="updateCheckedList($event)"></app-userlist>

        <mat-form-field floatLabel="always" appearance="outline">
          <mat-label>Selected users</mat-label>
          <mat-chip-list #chipList aria-label="User selection">
            <mat-chip id="registered" *ngFor="let user of selectedUsers" [selectable]="selectable"
                      [removable]="removable" (removed)="remove(user, selectedUsers)">
              {{user.username}}
              <button matChipRemove *ngIf="removable">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>

            <mat-chip id="unregistered" *ngFor="let user of selectedUnregisteredUsers" [selectable]="selectable"
                      [removable]="removable" (removed)="remove(user, selectedUnregisteredUsers)">
              {{user.username}}
              <button matChipRemove *ngIf="removable">
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip>
            <button id="add-button" mat-raised-button aria-label="Example icon button with a delete icon"
                    (click)="openNewUserInput(createTemplate)">
              Add new user
              <mat-icon id="add-icon">add_circle</mat-icon>
            </button>
          </mat-chip-list>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input [formGroup]="firstFormGroup" [rangePicker]="picker">
            <input matStartDate formControlName="startDate" placeholder="Start date">
            <input matEndDate formControlName="endDate" placeholder="End date">
          </mat-date-range-input>
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>

          <mat-error *ngIf="firstFormGroup.controls.startDate.hasError('matStartDateInvalid')">Invalid start date
          </mat-error>
          <mat-error *ngIf="firstFormGroup.controls.endDate.hasError('matEndDateInvalid')">Invalid end date</mat-error>
        </mat-form-field>

        <button mat-raised-button type="submit" [disabled]="!firstFormGroup.valid || contractLoad">Active</button>

      </form>

    </mat-step>
  </mat-stepper>
</div>

<ng-template #createTemplate>

  <h1 mat-dialog-title>Register new User</h1>

  <div mat-dialog-content id="template-container">




      <form #formDirective="ngForm" [formGroup]="registerUserForm" (ngSubmit)="addNewUser(formDirective)">

        <mat-form-field appearance="outline">
          <mat-label>Username</mat-label>
          <input formControlName="username" matInput placeholder="Username...">
          <mat-error>Username must be a valid e-mail</mat-error>
        </mat-form-field>

        <button id="register-button" mat-raised-button type="submit" [disabled]="!registerUserForm.valid">Register</button>
      </form>


  </div>

</ng-template>
